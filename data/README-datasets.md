# ITE Typing Datasets README file

ITE typing dataset is a keystroke-level typing dataset collected through online study in two languages during 2019-2020 by the Computational Behaviour Lab of Aalto University. 

In the study, 46755 participants typed sentences in English and 8661 participants typed in Finnish. Each participant has typed at least 15 sentences on their devices. Sentences were randomly selected from a set of sentences. Users were allowed to use Intelligent Text Entry (ITE) methods (Autocorrection and Suggestion Bar) and custom keyboards to type.
The usage of ITE methods was afterwards labelled automatically at the keystroke level.
See more information from the research article located in the GitHub repository. The documentation, and related codes for the data collection, processing, labelling and analysis are also located the GitHub.

The GitHub repository: https://github.com/aalto-speech/ite-typing-dataset



## Citation

Please see GitHub for the citation: https://github.com/aalto-speech/ite-typing-dataset



## FILES

ITE_words/
    - ac_words_en.csv 
        Words corrected with Autocorrection (English)
    - ac_words_fi.csv 
        Words corrected with Autocorrection (Finnish)
    - pred_words_en.csv 
        Words selected from Suggestion Bar (English)
    - pred_words_fi.csv 
        Words selected from Suggestion Bar (Finnish)


processed2020/
    preprocessed and labelled data
    
    english/ 
	    * log_data_labeled_en.csv : 
	        keystroke-level typing data
	    * participants_labeled_en.csv : 
	        participant-level information
	    * sentences_en.csv : 
	        a list of sentences used in the typing test
	    * test_sections_labeled_en.csv : 
	        each typed sentence
    finnish/ preprocessed finnis data
	    * log_data_labeled_fi.csv
	    * participants_labeled_fi.csv
	    * sentences_fi.csv 
	    * test_sections_labeled_fi.csv

raw_data/
    the original data
    
    typingtest_english_2020-06-03/
        * README.txt
        * raw_log_data_en_2020-06-03.csv
        * raw_participants_en_2020-06-03.csv
        * raw_sentences_en_2020-06-03.csv
        * raw_test_sections_en_2020-06-03.csv

    typingtest_finnish_2020-06-03/
        * raw_log_data_fi_2020-06-03.csv
        * raw_participants_fi_2020-06-03.csv
        * raw_sentences_fi_2020-06-03.csv
        * raw_test_sections_fi_2020-06-03.csv
        
        
files/ 
    files contain information on each word that appear in the tests. 

    * vocab_fi_all_size237962101.pkl 
        The number of the word occurs in the Yle news and subset of suomi24 corpora.
        The frequency of the word can be calculated by the number of occurrences / 237962101
    * vocab_giga_enron_size915074149.pkl
        The number of the word occurs in the Gigaword and Enron corpora.
        The frequency of the word can be calculated by the number of occurrences / 915074149




## Data tables

Dataset contains 4 tables: participants, test_sections, log and sentences.
Next: explanation of each column.

In addition, there are tables for ITE words for words generated by Autocorrection (AC) and Suggestion Bar (SB): ac_words and pred_words.

Notes: 
    * Finnish and English datasets have some differences in column names.
    * Suggestion Bar is referred as a prediction or prediction list in the data set.

In the end, there are some known issues with the log data.

## PARTICIPANTS
------------
* PARTICIPANT_ID: Participants ID.
* BROWSER: Information on browser and operating system.
* DEVICE: Used device: mobile or desktop.
* SCREEN_W: Screen width of the device.
* SCREEN_H: Screen height of the device.
* AGE: Reported age of the participant.
* GENDER: Reported genre of the participant.
* HAS_TAKEN_TYPING_COURSE: Participant has taken typing course: True/False.
* WPM: The average WPM over the test sections.
* ERROR_RATE: The average uncorrected error rate over the test sections.
* NATIVE_LANGUAGE: Reported native language of the participant.
* KEYBOARD_TYPE: Reported type of the keyboard: mobile, desktop.
* USING_APP: Reported keyboard app.
* USING_FEATURES: Reported ITE techniques used.
* FINGERS: Reported typing posture (which fingers were used to type).
* TIME_SPENT_TYPING: Time spent typing on the average in a day.
* TYPE_ENGLISH: Time spent typing English on average in a day.
* BACKSPACES: The average number of backspaces used over the test sections.
* KEYSTROKES: The average number of keystrokes used over the test sections.
* ITE: Observed ITE based on the log table.
* AC-ACCURACY: Observed autocorrection accuracy based on the log table.
* PRED-ACCURACY: Observed prediction table accuracy based on the log table.


## TEST SECTIONS
-------------
Each row contains a single test sentence

* TEST_SECTION_ID: ID of the test section
* SENTENCE_ID: ID of the sentence in the test section
* PARTICIPANT_ID: Participants ID
* USER_INPUT: Text user-inputted
* WPM: Average WPM during the test section
* ERROR_RATE: Uncorrected error rate. todo: how calculated exactly
* INPUT_TIME: Time between the first and the last input
* EDIT_DISTANCE: Edit distance between user input and the original sentence.
* BACKSPACES: The total number of backspaces pressed during the test section.
* ITE: Observed ITE techniques based on the log table.
* KEYSTROKES: The total number of keystrokes pressed.
* AC-ACCURACY: Accuracy of autocorrection if used.
* PRED-ACCURACY: Accuracy of prediction list if used.



## LOG DATA
--------

* TEST_SECTION_ID: Test section ID
* LOG_DATA_ID: Log data ID
* TIMESTAMP: Timestamp for the keystroke
* KEY: Key pressed based on...
* INPUT: Text on the input field after the keystroke.
* INPUT_ADDED: Text added during the keystroke.
* INPUT_DELEDED: Text deleted during the keystroke
* OBSERVED_KEY: Observed special key press: Space, backspace, ITE or ITE correction.



## ITE WORDS
---------

* TEST_SECTION_ID: Test section ID
* SENTENCE_ID: ID of the sentence in the test section
* CURRENT_INPUT: The text in the input field
* TYPED WORD: The word before ITE operation
* AC_WORD: The typed word after Autocorrection
* PRED_WORD: The word after SB selection / The word the user selected from the SB.
* ORIGINAL WORD: The word from the reference sentence. The word user was meant to be typed.


-----------------------------------------------------------
-----------------------------------------------------------


## NOTES:

Datasets have some issues due to the unreliability of the log data.


1. LOG_DATA_IDs are not always in the same order as TIMESTAMPs. It is unclear why this is, but TIMESTAMP is more reliable when studying the order of keystrokes. It is recommended to ignore LOG_DATA_IDs and use only TIMESTAMPS.
	If data is ordered by IDs, the ITE recognition does not work correctly.
	EXAMPLE: 
		2711,349484,1537445094475,t,Hopefully this can wait unt,t,,
		2711,349494,1537445094813,l,Hopefully this can wait until,il,,PRED <<---- WRONG ORDER
		2711,349495,1537445094603,i,Hopefully this can wait unti,,l,BACKSPACE <<---- WRONG ORDER
		2711,349505,1537445095061, ,Hopefully this can wait until ,l ,,AC

2. Sometimes typed sentence disappears at the end.

3. Sometimes there is empty or non-letters entrys before the first real letter.

4. All log instants are not caused by the user. For example, it if AC has corrected the word incorrectly and user presses backspace to undo the correction, the whole word disappears before the old word appears. These auto-inputs happen usually under 10-20ms.
	EXAMPLE:
		378329,2908,378330,1537446515028,Unidentified,Ahe,e,,
		378334,2908,378335,1537446515197,Unidentified,She ,S ,A,AC
		378336,2908,378337,1537446515208,Unidentified,She ,,,
		378345,2908,378346,1537446515727,Unidentified,,,She ,AUTO-INPUT
		378348,2908,378349,1537446515742,Unidentified,Ahe,Ahe,,PRED

5. Keycodes are more often recognized as Unidentified. Therefore, they are not realible source of input.





## ITE labelling
----------

ITEs are defined as follows:

- AUTOCRRECTION: 	Autocorrection automatically corrects or fills a word when the user presses space.
					* More than one character was changed.
					* One or more characters there inputted in addition to whitespace or .:,!?.
					* In case of simple correction the word length does not change much, however, if the word is automatically completed multiple characters are added at the end of the word.

- PREDICTION: Also known as Suggestion Bar. The user selects from a list a word which then replaces the word being typed.
					* One or more characters were changed. 
					* The last character is a letter (not whitespace or .:,!?).

- GESTURE: The user swipes over the keys to type the word as a continuous line instead of keypresses.
					* More than one character was changed.
					* One or more characters there inputted in addition to whitespace.
					* The whole word was added.
					* Many variations (see below)

There is also an "auto-fill" technique where the predicted word appears above the word being typed. It can be selected by pressing space and if prediction is incorrect user has to unselect it by pressing. By observing only the text entry field, it is impossible to separate this entry from normal autocorrection. The traditional way to define autocorrection is that the length of the word does not change much, however, the corrections for Finnish can sometimes be a lot longer for some reason (usually they are incorrect in this case).
The problem with autofill is that is it a prediction or autocorrection? How to separate the AC and autofill/predict accurately?
There is also the possibility of confusing it with gesture with the previous definition.

However, the definitions are not always accurate but depend on the used device. Especially gestures (swipe) have different ways they are logged into the data. We did not manually study all variations as datasets are too large, however, we found the following anomalies:

The current version of the analysis and labelling code tries to catch these problems but it is not perfect.


1. Input: a part of the word, space and the first letter of the next word.
	- Probably gesture?
	- Appears in both Finnish and English datasets.
	EXAMPLE:
		360266,2787,360267,1537445824804,J,he only gained 17 yard on nine carries in the J,J,,
		360273,2787,360274,1537445826551,a,he only gained 17 yard on nine carries in the Ja,a,,
		360276,2787,360277,1537445826719,g,he only gained 17 yard on nine carries in the Jag,g,,
		360279,2787,360280,1537445826999,u,he only gained 17 yard on nine carries in the Jagu,u,,
		360306,2787,360307,1537445828710,p,he only gained 17 yard on nine carries in the Jaguars p,ars p,, UNKNOWN


2. Sometimes input is just weird and ITE is recognised incorrectly.:
	EXAMPLE:
		3045173,407325987,1590699699801,Unidentified,Indy time t,t,,
		3045173,407325990,1590699699818,Unidentified,Indy time ,,t,BACKSPACE
		3045173,407325993,1590699699820,Unidentified,Indy ,,time ,AUTO-INPUT
		3045173,407325996,1590699699823,Unidentified,Indy time t,time t,,PRED
		3045173,407325999,1590699699941,Unidentified,Indy time tr,r,,
		3045173,407326002,1590699699949,Unidentified,Indy ,,time tr,ITE-correction
		3045173,407326005,1590699699951,Unidentified,Indy time ,time ,,AUTO-INPUT
		3045173,407326008,1590699699952,Unidentified,Indy time tr,tr,,PRED


		2927782,391492682,1571332100065,Unidentified,We probably hace tl discuss trade b,b,,
		2927782,391492685,1571332100106,Unidentified,We probably hace tl discuss trade ,,b,BACKSPACE
		2927782,391492688,1571332100114,Unidentified,We probably hace tl discuss ,,trade ,AUTO-INPUT
		2927782,391492691,1571332100119,Unidentified,We probably hace tl discuss trade b,trade b,,PRED
		2927782,391492694,1571332100163,Unidentified,We probably hace tl discuss trade be,e,,
		2927782,391492697,1571332100391,Unidentified,We probably hace tl discuss trade beh,h,,
		2927782,391492700,1571332100453,Unidentified,We probably hace tl discuss trade beha,a,,
		2927782,391492703,1571332100766,Unidentified,We probably hace tl discuss trade behav,v,,
		2927782,391492706,1571332100791,Unidentified,We probably hace tl discuss trade behavi,i,,
		2927782,391492709,1571332101349,Unidentified,We probably hace tl discuss trade behavio,o,,
		2927782,391492712,1571332101361,Unidentified,We probably hace tl discuss ,,trade behavio,ITE-correction
		2927782,391492715,1571332101367,Unidentified,We probably hace tl discuss trade ,trade ,,AUTO-INPUT
		2927782,391492718,1571332101372,Unidentified,We probably hace tl discuss trade behavio,behavio,,PRED
		2927782,391492721,1571332101524,Unidentified,We probably hace tl discuss trade behaviou,u,,
		2927782,391492724,1571332101532,Unidentified,We probably hace tl discuss trade ,,behaviou,ITE-correction
		2927782,391492727,1571332101537,Unidentified,We probably hace tl discuss ,,trade ,AUTO-INPUT
		2927782,391492730,1571332101542,Unidentified,We probably hace tl discuss trade behaviou,trade behaviou,,PRED


3. Sometimes whole words are inputted without space at the end. However, it cannot be predicted because it requires some letters to give a prediction (words can be predicted after a word but e.g. first word in the sentence cannot be predicted without giving some letters). Maybe a gesture, maybe something else.


4. Sometimes the first character of the new input is space. Probably gesture? --> ' hello'


5. In some cases space after autocorrection is logged as separate input even though it is not keystroke from the user. It can be recognised by a small time difference in timestamps:  e.g. 11ms between logs.
		1626925,214628522,1547042711377,Unidentified,Arkansas c,c,,
		1626925,214628525,1547042711576,Unidentified,Arkansas ca,a,,
		1626925,214628528,1547042711914,Unidentified,Arkansas cal,l,,
		1626925,214628531,1547042712130,Unidentified,Arkansas cale,e,,
		1626925,214628534,1547042712323,Unidentified,Arkansas caled,d,,
		>1626925,214628537,1547042712460,Unidentified,Arkansas Caledonian,Conian,c,PRED
		>1626925,214628540,1547042712471,Unidentified,Arkansas Caledonian , ,,SPACE
		1626925,214628543,1547042712692,Unidentified,Arkansas Caledonian i,i,,
		1626925,214628546,1547042712860,Unidentified,Arkansas Caledonian in,n,,
		1626925,214628549,1547042713059,Unidentified,Arkansas Caledonian in,,,
		1626925,214628552,1547042713066,Unidentified,Arkansas Caledonian in , ,,SPACE


6. Gestures can be inserted a part of the word at the time: (is not recognized correctly by the algorithm atm.)
		1715720,226500197,1547465707420,Unidentified,San,San,,
		1715720,226500200,1547465707491,Unidentified,San,,,
		1715720,226500203,1547465707519,Unidentified,San,,,
		1715720,226500206,1547465707863,Unidentified,San , ,,SPACE
		1715720,226500209,1547465708103,Unidentified,San tra,tra,,
		1715720,226500212,1547465708451,Unidentified,San franc,fnc,t,GESTURE
		1715720,226500215,1547465708800,Unidentified,San France,Fe,f,GESTURE
		1715720,226500218,1547465709152,Unidentified,San Francisco,isco,e,GESTURE
		1715720,226500221,1547465709235,Unidentified,San Francisco,,,
		1715720,226500224,1547465709258,Unidentified,San Francisco,,,
		1715720,226500227,1547465709781,Unidentified,San Francisco , ,,SPACE
		1715720,226500230,1547465710333,Unidentified,San Francisco was,was,,
		1715720,226500233,1547465710366,Unidentified,San Francisco was,,,
		1715720,226500236,1547465710664,Unidentified,San Francisco was , ,,SPACE
		1715720,226500239,1547465711544,Unidentified,San Francisco was in,in,,
		1715720,226500242,1547465711895,Unidentified,San Francisco was inter,ter,,GESTURE
		1715720,226500245,1547465712245,Unidentified,San Francisco was interim,im,,GESTURE
		1715720,226500248,1547465712600,Unidentified,San Francisco was interfacing,facng,m,GESTURE
		1715720,226500251,1547465712941,Unidentified,San Francisco was interconnect,onect,faig,GESTURE
		1715720,226500254,1547465712969,Unidentified,San Francisco was interconnect,,,
		1715720,226500257,1547465712982,Unidentified,San Francisco was interconnect,,,
		1715720,226500260,1547465714730,Backspace,San Francisco was nterconnect,,i,BACKSPACE
		1715720,226500263,1547465715546,Unidentified,San Francisco was Interconnect,I,,
		1715720,226500266,1547465716436,Unidentified,San Francisco was Interconnect , ,,SPACE
		1715720,226500269,1547465716989,Unidentified,San Francisco was Interconnect merry,merry,,
		1715720,226500272,1547465717317,Unidentified,San Francisco was Interconnect meeting,eting,rry,GESTURE
		1715720,226500275,1547465717334,Unidentified,San Francisco was Interconnect meeting,,,
		1715720,226500278,1547465718362,Unidentified,San Francisco was Interconnect meeting.,.,,


7. Gesture input starts with space BUT sometimes prediction starts too if the whole word is selected:
		1752143,231273998,1547625153195, human,He was professor emeritus of human, human,,
		1752143,231274001,1547625156979, development,He was professor emeritus of human development, development,,
		1752143,231274004,1547625159362, and,He was professor emeritus of human development and, and,,
		1752143,231274007,1547625163715, party,He was professor emeritus of human development and party, party,,
		1752143,231274014,1547625164623,Backspace,He was professor emeritus of human development and ,,party,ITE-correction
		1752143,231274017,1547625168749,psychiatry,He was professor emeritus of human development and psychiatry,psychiatry,,PRED


8. Inputs from the keyboard (not from user). Sometimes ITE causes changes in input fields which are not caused by the user but are automatic. Usually, the duration between keypresses is small (around 20ms) which is too fast to be user input. We recognize these and mark them as AUTO-INPUT. However, sometimes duration for user input is around 20ms as well. I guess it is caused by a lag and not that the user is a super fast typer because these are not common.


9. Prediction based on user study
		1753203,231394184,1547629792196,a,I wish he would lea,a,,
		1753203,231394356,1547629794725,D,I wish he would leave D,ve D,,UNKNOWN

10. Gestures and predictions are difficult to set apart from each other.
	939378,7116,939379,1537474235360,Unidentified,Let me know if I can , ,,SPACE
	939421,7116,939422,1537474236146,Unidentified,Let me know if I can be,be,,GESTURE
	939432,7116,939433,1537474236392,Unidentified,Let me know if I can be , ,,SPACE
	939436,7116,939437,1537474236426,Unidentified,Let me know if I can be,, ,AUTO-INPUT
	939444,7116,939445,1537474236436,Unidentified,Let me know if I can be. ,. ,,AC-COMMA
	939470,7116,939471,1537474236994,Unidentified,Let me know if I can be. Of,Of,,PREDICTION
	939486,7116,939487,1537474237409,Unidentified,Let me know if I can be. ,,Of,MULT-CHAR-DEL
	939502,7116,939503,1537474237563,Unidentified,Let me know if I can be.,, ,BACKSPACE
	939513,7116,939514,1537474237731,Unidentified,Let me know if I can be,,.,BACKSPACE
	939516,7116,939517,1537474237778,Unidentified,Let me know if I can ,,be,AUTO-INPUT
	939531,7116,939532,1537474237789,Unidentified,Let me know if I can be,be,,ITE-CORRECTION
	939550,7116,939551,1537474238138,Unidentified,Let me know if I can be , ,,SPACE
	939575,7116,939576,1537474238709,Unidentified,Let me know if I can be if,if,,GESTURE
	939631,7116,939632,1537474239691,Unidentified,Let me know if I can be of ,o ,i,AC
	939697,7116,939698,1537474240750,Unidentified,Let me know if I can be of help,help,,PREDICTION








